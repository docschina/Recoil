<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Recoil Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Recoil Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-46","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-46","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>

<title data-react-helmet="true">0.0.8-released | Recoil</title>

<meta data-react-helmet="true" property="og:title" content="0.0.8-released | Recoil"><meta data-react-helmet="true" name="description" content="# Recoil 0.0.8"><meta data-react-helmet="true" property="og:description" content="# Recoil 0.0.8"><meta data-react-helmet="true" property="og:image" content="img/og-image.png"><meta data-react-helmet="true" property="twitter:image" content="img/og-image.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for 0.0.8-released | Recoil"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.5b75614d.css">


<link rel="preload" href="/styles.97b60e2c.js" as="script">

<link rel="preload" href="/runtime~main.09b088d5.js" as="script">

<link rel="preload" href="/main.764ce5e9.js" as="script">

<link rel="preload" href="/1.b8eba73a.js" as="script">

<link rel="preload" href="/2.a9318eaa.js" as="script">

<link rel="preload" href="/3.821846e8.js" as="script">

<link rel="preload" href="/ccc49370.849af568.js" as="script">

<link rel="preload" href="/befc7085.31560448.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><strong class="navbar__title">Recoil</strong></a><a class="navbar__item navbar__link" href="/docs/introduction/installation">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/docschina/Recoil" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">Recoil</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" position="left" href="/docs/introduction/installation">文档</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" position="left" href="/blog">Blog</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/docschina/Recoil" class="menu__link" position="right">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--8 col--offset-2"><article><header><h1 class="margin-bottom--sm blogPostTitle_2RZH"></h1><div class="margin-vert--md"><time datetime="2020-05-30T00:00:00.000Z" class="blogPostDate_3tRe">May 30, 2020  · 4 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"></div></div></header><section class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="recoil-008"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#recoil-008" title="Direct link to heading">#</a>Recoil 0.0.8</h1><p>Today we are releasing Recoil 0.0.8. It contains bug fixes and new features. Thanks so much to everyone who contributed to this release! It&#x27;s been amazing to see so many people contribute.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="bug-fixes"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#bug-fixes" title="Direct link to heading">#</a>Bug Fixes</h2><ul><li>Fixed a bug where atoms that stored self-referential structures would cause an infinite loop. (@n3tr in #153)</li><li>Fixed bugs affecting Server-Side Rendering. (@sbaudray in #53)</li><li>Fixed build system and repository syncing problems. Many people contributed to this, especially @mondaychen and including
@claudiopro, @dustinsoftware, @jacques-blom, @jaredpalmer, @kentcdodds, @leushkin, and @tony-go. It remains to get Jest and Flow to behave the same between internal and OSS.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="features"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#features" title="Direct link to heading">#</a>Features</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="typescript-support"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#typescript-support" title="Direct link to heading">#</a>TypeScript support</h3><p>TypeScript definitions are now available via the <code>DefinitelyTyped</code> repository.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="atomfamily-and-selectorfamily"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#atomfamily-and-selectorfamily" title="Direct link to heading">#</a><code>atomFamily</code> and <code>selectorFamily</code></h3><p>These utilities help you create collections of related atoms or selectors, one for each value of some parameter. Instaed of manually creating a memoized function that returns an atom or selector, you can use <code>atomFamily</code> and <code>selectorFamily</code>. In the future, these utilities will also help with memory management.</p><p>The <code>atomFamily</code> function returns a function from some parameter to an atom, creating a new atom for each value of the parameter that is passed in. For example, suppose you wanted to store a set of coordinates <code>{x: number, y: number}</code> for every member of a collection identified by some <code>ID</code>. Then you could write:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const coordinatesForID = atomFamily&lt;{x: number, y: number}, ID&gt;({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    key: &#x27;coordinatesForID&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    default: {x: 0, y: 0},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div></div></div></div></div><p>and then access that state as follows:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">function MyComponent({id}) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    const [coordinates, setCoordinates] = useRecoilState(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        coordinatesForID(id)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Each <code>ID</code> passed to <code>coordinatesForID</code> will get its own independent atom containing the coordinates. Each of these atoms has its own subscriptions, so a component that uses the state for a single ID will only be subscribed to changes to that one ID.</p><p>Similarly, <code>selectorFamily</code> lets you create a different selector for each value of some parameter. For example, suppose you wanted to take each of those coordinates and rotate them by 180 degrees:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const rotatedCoordinatesForID = selectorFamily&lt;{x: number, y: number}, ID&gt;({</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    key: &#x27;rotatedCoordinatesForID&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    get: id =&gt; ({get}) =&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        const coordinates = get(coordinatesForID(id));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            x: -coordinates.x,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            y: -coordinates.y,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div></div></div></div></div><p>Note that the <code>get</code> property of a selector family is a function that takes the parameter (in this case ID) and returns a function with a signature identical to the <code>get</code> property of a single selector. In general, this is how all of the options for atom families and selector families work.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="concurrency-helpers"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#concurrency-helpers" title="Direct link to heading">#</a>Concurrency helpers</h3><p>We&#x27;ve introduced selector families for controlling concurrency in async selectors:</p><ul><li><code>waitForAll</code>: requests all dependencies in parallel and waits for all of them to become available.</li><li><code>waitForAny</code>: requests all dependencies in parallel and waits for any one of them to become available.</li><li><code>waitForNone</code>: requests all dependencies in parallel but doesn&#x27;t wait for any of them.</li><li><code>noWait</code> requests a single dependency but doesn&#x27;t wait for it to become available.</li></ul><p>These can be used to retireve multiple dependencies in parallel and to write logic conditional on the status of an upstream dependency. For example, you can write a selector that conditionally provides a default value while an async process is in flight instead of propagating that loading state down to components.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="constselector-and-errorselector"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#constselector-and-errorselector" title="Direct link to heading">#</a><code>constSelector</code> and <code>errorSelector</code></h3><p>These selector families simply return a constant value or always throw a given error, respectively.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="readonlyselector"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#readonlyselector" title="Direct link to heading">#</a>readOnlySelector</h3><p>This simply wraps a read-write <code>RecoilState</code> in a read-only interface.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="whats-next"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#whats-next" title="Direct link to heading">#</a>What&#x27;s Next</h2><p>We&#x27;re working on improvements to the observation and persistence APIs, improved speed and memory management, and support for Concurrent Mode. Thanks so much for trying Recoil, we hope you&#x27;ll stick around and see what it becomes!</p></section></article><div><a href="https://github.com/docschina/Recoil/edit/docs/docs/blog/blog/2020-05-30-0.0.8-released.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2020/06/18/0.0.10-released"><div class="pagination-nav__link--sublabel">Previous Post</div><div class="pagination-nav__link--label">« 0.0.10-released</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">学习</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/core-concepts">核心概念</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">社区</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/recoiljs">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://github.com/facebookexperimental/Recoil">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">隐私政策</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noreferrer noopener" href="https://opensource.facebook.com/legal/privacy/">隐私策略</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noreferrer noopener" href="https://opensource.facebook.com/legal/terms/">条款</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1Wg7"><img class="footer__logo" alt="Facebook Open Source Logo" src="/img/oss_logo.png"></a></div><div>Copyright © 2021 Facebook, Inc. Built with Docusaurus. Translate by docschina.</div></div></div></footer>
</div>

<script src="/styles.97b60e2c.js"></script>

<script src="/runtime~main.09b088d5.js"></script>

<script src="/main.764ce5e9.js"></script>

<script src="/1.b8eba73a.js"></script>

<script src="/2.a9318eaa.js"></script>

<script src="/3.821846e8.js"></script>

<script src="/ccc49370.849af568.js"></script>

<script src="/befc7085.31560448.js"></script>


</body>
</html>