(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{167:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return s}));var a=n(1),o=n(9),r=(n(0),n(202)),c={title:"atom(options)",sidebar_label:"atom()"},i={id:"api-reference/core/atom",title:"atom(options)",description:"\u4e00\u4e2a *atom* \u8868\u793a Recoil \u7684 state\u3002`atom()` \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u53ef\u5199\u7684 `RecoilState` \u5bf9\u8c61\u3002",source:"@site/docs/api-reference/core/atom.md",permalink:"/docs/api-reference/core/atom",editUrl:"https://github.com/docschina/Recoil/edit/docs/docs/docs/api-reference/core/atom.md",sidebar_label:"atom()",sidebar:"someSidebar",previous:{title:"<RecoilRoot ...props />",permalink:"/docs/api-reference/core/RecoilRoot"},next:{title:"selector(options)",permalink:"/docs/api-reference/core/selector"}},l=[{value:"\u793a\u4f8b",id:"\u793a\u4f8b",children:[]}],b={rightToc:l};function s(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"\u4e00\u4e2a ",Object(r.b)("em",{parentName:"p"},"atom")," \u8868\u793a Recoil \u7684 state\u3002",Object(r.b)("inlineCode",{parentName:"p"},"atom()")," \u51fd\u6570\u8fd4\u56de\u4e00\u4e2a\u53ef\u5199\u7684 ",Object(r.b)("inlineCode",{parentName:"p"},"RecoilState")," \u5bf9\u8c61\u3002"),Object(r.b)("hr",null),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"function atom<T>({\n  key: string,\n  default: T | Promise<T> | RecoilValue<T>,\n\n  dangerouslyAllowMutability?: boolean,\n}): RecoilState<T>\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"key")," - \u5728\u5185\u90e8\u7528\u4e8e\u6807\u8bc6 atom \u7684\u552f\u4e00\u5b57\u7b26\u4e32\u3002\u5728\u6574\u4e2a\u5e94\u7528\u4e2d\uff0c\u8be5\u5b57\u7b26\u4e32\u5fc5\u987b\u76f8\u5bf9\u4e8e\u5176\u4ed6 atom \u548c selector \u4fdd\u6301\u552f\u4e00\u3002"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"default")," - atom \u7684\u521d\u59cb\u503c\uff0c\u6216\u4e00\u4e2a ",Object(r.b)("inlineCode",{parentName:"li"},"Promise"),"\uff0c\u6216\u53e6\u4e00\u4e2a atom\uff0c\u6216\u4e00\u4e2a\u7528\u6765\u8868\u793a\u76f8\u540c\u7c7b\u578b\u7684\u503c\u7684 selector\u3002"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"dangerouslyAllowMutability")," - Recoil depends on atom state changes to know when to notify components that use the atoms to re-render.  If an atom's value were mutated, it may bypass this and cause state to change without properly notifying subscribing compoennts.  To help protect against this all stored values are frozen.  In some cases it may be desireable to override this using this option.")),Object(r.b)("hr",null),Object(r.b)("p",null,"\u901a\u5e38\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u4ee5\u4e0b hook \u6765\u4e0e atom \u642d\u914d\u4f7f\u7528\u3002"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/api-reference/core/useRecoilState"}),Object(r.b)("inlineCode",{parentName:"a"},"useRecoilState()")),"\uff1a\u5f53\u4f60\u540c\u65f6\u9700\u8981\u5bf9 atom \u8fdb\u884c\u8bfb\u5199\u65f6\uff0c\u4f7f\u7528\u6b64 hook\u3002\u4f7f\u7528\u6b64 hook \u4f1a\u4f7f\u7ec4\u4ef6\u8ba2\u9605 atom\u3002"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/api-reference/core/useRecoilValue"}),Object(r.b)("inlineCode",{parentName:"a"},"useRecoilValue()")),"\uff1a\u5f53\u4f60\u4ec5\u9700\u8981\u8bfb\u53d6 atom \u65f6\uff0c\u4f7f\u7528\u6b64 hook\u3002\u4f7f\u7528\u6b64 hook \u4f1a\u4f7f\u7ec4\u4ef6\u8ba2\u9605 atom\u3002"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/api-reference/core/useSetRecoilState"}),Object(r.b)("inlineCode",{parentName:"a"},"useSetRecoilState()")),"\uff1a\u5f53\u4f60\u4ec5\u9700\u8981\u5199\u5165 atom \u65f6\uff0c\u4f7f\u7528\u6b64 hook\u3002"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/api-reference/core/useResetRecoilState"}),Object(r.b)("inlineCode",{parentName:"a"},"useResetRecoilState()")),"\uff1a\u9700\u5c06 atom \u91cd\u7f6e\u4e3a\u9ed8\u8ba4\u503c\u65f6\uff0c\u4f7f\u7528\u6b64 hook\u3002")),Object(r.b)("p",null,"\u5728\u4e00\u4e9b\u7f55\u89c1\u7684\u573a\u666f\u4e0b\uff0c\u4f60\u9700\u8981\u5728\u4e0d\u8ba2\u9605\u7ec4\u4ef6\u7684\u60c5\u51b5\u4e0b\u8bfb\u53d6 atom \u7684\u503c\uff0c\u8bf7\u53c2\u8003 ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/api-reference/core/useRecoilCallback"}),Object(r.b)("inlineCode",{parentName:"a"},"useRecoilCallback()")),"\u3002"),Object(r.b)("p",null,"You can initialize an atom either with a static value or with a ",Object(r.b)("inlineCode",{parentName:"p"},"Promise")," or a ",Object(r.b)("inlineCode",{parentName:"p"},"RecoilValue")," representing a value of the same type.  Because the ",Object(r.b)("inlineCode",{parentName:"p"},"Promise")," may be pending or the default selector may be asynchronous it means that the atom value may also be pending or throw an error when reading.  Note that you cannot currently assign a ",Object(r.b)("inlineCode",{parentName:"p"},"Promise")," when setting an atom.  Please use ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/api-reference/core/selector"}),"selectors")," for async functions."),Object(r.b)("p",null,"Atoms cannot be used to store ",Object(r.b)("inlineCode",{parentName:"p"},"Promise"),"s or ",Object(r.b)("inlineCode",{parentName:"p"},"RecoilValues")," directly, but they may be wrapped in an object.  Note that ",Object(r.b)("inlineCode",{parentName:"p"},"Promises")," may be mutable."),Object(r.b)("h3",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import {atom, useRecoilState} from 'recoil';\n\nconst counter = atom({\n  key: 'myCounter',\n  default: 0,\n});\n\nfunction Counter() {\n  const [count, setCount] = useRecoilState(counter);\n  const incrementByOne = () => setCount(count + 1);\n\n  return (\n    <div>\n      Count: {count}\n      <br />\n      <button onClick={incrementByOne}>Increment</button>\n    </div>\n  );\n}\n")))}s.isMDXComponent=!0},202:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var b=o.a.createContext({}),s=function(e){var t=o.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):i({},t,{},e)),n},p=function(e){var t=s(e.components);return o.a.createElement(b.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,b=l(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,d=p["".concat(c,".").concat(m)]||p[m]||u[m]||r;return n?o.a.createElement(d,i({ref:t},b,{components:n})):o.a.createElement(d,i({ref:t},b))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,c=new Array(r);c[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var b=2;b<r;b++)c[b]=n[b];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);